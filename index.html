<!DOCTYPE html>
<html lang="ko">
<head>
  <title>CodeNameTag</title>
  <meta name="description" content="프로그래밍 언어 스타일의 명찰을 만들어보세요!">
  <meta keywords="nametag, programmer, programming language, IT">
  <meta author="N8G8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, user-scalable=no">

  <!-- Font -->
  <link href="//fonts.googleapis.com/earlyaccess/notosansgothic.css" rel="stylesheet">
  <link href="//fonts.googleapis.com/earlyaccess/notosanskr.css" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="./css/style.css">
  <link rel='stylesheet' href='./css/spectrum.css' />
  <link rel='stylesheet' href='./css/bootstrap-switch.min.css' />


  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

  <script src="./js/canvas2image.js"></script>
  <script src="./js/html2canvas.js"></script>
  <script src='./js/spectrum.js'></script>
  <script src='./js/bootstrap-switch.min.js'></script>

  <!-- favicon -->
  <link rel="shortcut icon" id="favicon" type="image/png" href="favicon.png">

  <!-- 스타일 적용 테스트 -->
  <style type="text/css">
  </style>
</head>
<body>
<header>
  <nav class="navbar navbar-dark bg-dark">
      <a href="./index.html" class="navbar-brand">NAMETAG</a>
      <div class="">
          <i class="fas fa-info-circle" id="infoToggle" style="color:#fff;font-size:16pt;padding:0;position: relative;top: 2px; cursor: pointer;margin-right:10px;"></i>
          <input id="toggleLang" type="checkbox" checked="" data-size="mini" data-off-color="primary" data-on-text="KOR" data-off-text="ENG">
      </div>
      <div style="position: absolute;right: 101px;top: 14px;">
        <div id="informationBox">
          <div class="bubble">
              <dl>
                <dt style="font-size: 20px;">
                  프로그래밍 언어 스타일의 명찰을 만들어보세요!</dt></br>
                <dt>명찰내용</dt>
                  <dd>이름, 회사 등 명찰에 적용할 정보를 입력합니다.</dd>
                </br><dt>미리보기</dt>
                  <dd>입력 값이 적용된 명찰을 미리 확인할 수 있습니다.</dd>
                </br><dt>만들기</dt>
                  <dd> 명찰을 PNG 파일로 생성합니다.</dd>
                </br><dt>공유</dt>
                  <dd> 생성한 명찰을 SNS로 공유할 수 있습니다.</dd>
              </dl>
          </div>
        </div>
      </div><!-- <div style="position: absolute;right: 101px;top: 14px;"> -->
  </nav><!-- <nav class="navbar navbar-dark bg-dark"> -->
</header>

<div class="container">
  <div class="row">
      <div class="col-md-5 offset-md-1" style="background-color:#eee;padding-left: 25px;padding-right: 25px;">
          <h1 id="inputAreaTitle" class="text-center">명찰내용</h1>
          <form id="userInput">
              <div class="form-group">
                <input type="text" class="form-control" id="InputName" placeholder="이름" maxlength="30">
              </div>
              <div class="form-group">
                <input type="text" class="form-control" id="InputCompany" placeholder="회사명">
              </div>
              <div class="form-group">
                <input type="text" class="form-control" id="InputPosition" placeholder="직위">
              </div>
              <div class="language">
                <select class="form-control selBox" id="selLanguage">
                  <option value="c">Language</option>
                  <option value="c">C</option>
                  <option value="cpp">C++</option>
                  <option value="csharp">C#</option>
                  <option value="objc">Objective-C</option>
                  <option value="java">JAVA</option>
                  <option value="javascript">Javascript</option>
                  <option value="python">Python</option>
                  <option value="swift">Swift</option>
                  <option value="ruby">Ruby</option>
                </select>
              </div>
              <div class="theme">
                <select class="form-control selBox" id="selTheme">
                  <option value="default">Theme</option>
                  <option value="default">default</option>
                  <option value="synhi">synhi</option>
                  <option value="sunset">sunset</option>
                  <option value="ghb">ghb</option>
                  <option value="dark">dark</option>
                  <option value="mono">mono</option>
                  <option value="eclipse">eclipse</option>
                  <option value="ironman">ironman</option>
                </select>
              </div>
              <div class="colorPick text-center">
                <div style="margin-bottom:5px;">
                  <input type='text' data-lnk="bg" />
                  <input type='text' data-lnk="varType" />
                  <input type='text' data-lnk="varName" />
                  <input type='text' data-lnk="str" />
                  <input type='text' data-lnk="comment" />
                  <input type='text' data-lnk="txt" />
                </div>
              </div>
              <div class="text-center">
                <button type="button" class="btn btn-success" id="generation">만들기</button>
              </div>
          </form>
      </div>
      <div class="col-md-5">
        <div class="preveiw-area text-center">
            <h1 id="previewTitle">미리보기</h1>
            <div class="nameTag" id="nameTag">
              <canvas id="cardPreview" width="306" height="510"></canvas>
            </div>
        </div>
      </div>
  </div><!-- <div class="row"> -->
</div><!-- <div class="container"> -->

<div id="resultArea" class="text-center" >
  <div id="resultBackground"></div>
  <div id="resultImage" style="padding-top: 10px;"></div>
  <div style="margin-top:20px">
    <input class="btn btn-info share" type="button" value="공유">
    <a class="btn btn-success" href="#" role="button" id="downloadBtn" download="NameTag.png">저장</a>
    </div>
</div>

<div id="startInfo">
  <div id="resultBackground"></div>
</div>
<!-- body 전체 container div-->
</div>

<footer>
  <div class="container">
      <div class="row">
          <div class="col-md-12">
            <div class="copyright">
              © 2016 by
              <a href="https://github.com/CodeNameTag">N8G8</a>
              <a href="https://github.com/CodeNameTag/CodeNameTag.github.io"> | Github</a>
            </div>
          </div>
      </div>
  </div>

</footer>
<script>
String.prototype.byteLength = function() {
    var l= 0;

    for(var idx=0; idx < this.length; idx++) {
        var c = escape(this.charAt(idx));
         
        if( c.length==1 ) l ++;
        else if( c.indexOf("%u")!=-1 ) l += 2;
        else if( c.indexOf("%")!=-1 ) l += c.length/3;
    }
     
    return l;
};

const getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};
const cardLangTemplate = {
  swift : { varType: 'let ', semicolon : false, commentStart: '/*', commentEnd: '*/', pointer:false, atsign:false},
  c     : { varType: 'char', semicolon: true, commentStart: '/*', commentEnd: '*/', pointer:true, atsign:false },
  cpp   : { varType: 'std::string', semicolon: true, commentStart: '/*', commentEnd: '*/', pointer:false, atsign:false },
  csharp: { varType: 'string', semicolon: true, commentStart: '/*', commentEnd: '*/', pointer:false, atsign:false },
  objc   : { varType: 'NSString', semicolon: true, commentStart: '/*', commentEnd: '*/', pointer:true, atsign:true },
  python: { varType: '', semicolon: false, commentStart: '\'\'\'', commentEnd: '\'\'\'', pointer:false, atsign:false },
  javascript: { varType: 'var', semicolon: true, commentStart: '/*', commentEnd: '*/', pointer:false, atsign:false },
  java  : { varType: 'String', semicolon: true, commentStart: '/*', commentEnd: '*/', pointer:false, atsign:false },
  ruby : { varType: '', semicolon: false, commentStart: '#', commentEnd: '', pointer:false, atsign:false },
  erlang : { varType: '', semicolon: false, commentStart: '%', commentEnd: '', pointer:false, atsign:false }
};
const cardColorTemplate = {
  default : { bg: '#fff', varType :'#3a95ae', varName : '#000', str : '#b22821', comment : '#008d14', txt:'#000'},
  synhi  : { bg: '#fff', varType :'#007020', varName : '#bb60d5', str : '#4070a0', comment : '#60a0b0', txt:'#000'},
  sunset  : { bg: '#fffceb', varType :'#375788', varName : '#000', str : '#e63b3f', comment : '#d08631', txt:'#000'},
  ghb  : { bg: '#fff', varType :'#a41f5b', varName : '#333333', str : '#db4d1d', comment : '#a79896', txt:'#333333'},
  dark  : { bg: '#0b152b', varType :'#fbe04c', varName : '#4c509a', str : '#66ca51', comment : '#bcbcbc', txt:'#fff'},
  mono  : { bg: '#272822', varType :'#f34683', varName : '#ede8e5', str : '#ebdf8c', comment : '#888372', txt:'#ede8e5' },
  eclipse : { bg: '#272822', varType :'#66d9ef', varName : '#f8f8f2', str : '#e6db74', comment : '#75715e', txt:'#f8f8f2' },
  ironman : { bg: '#771414', varType :'#ede8e5', varName : '#beba46', str : '#ebdf8c', comment : '#8bd3fb', txt:'#ede8e5' }
};

const FONT_NOTO_SANS_KR = "'Noto Sans KR', sans-serif";

const NameTagPreview = class {
  constructor(canvas) {
    this.dpr = window.devicePixelRatio || 1;
    this.canvas = canvas;

    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * this.dpr;
    canvas.height = rect.height * this.dpr;

    this.ctx = canvas.getContext("2d");
    this.ctx.font = (20*this.dpr) + 'pt ' + FONT_NOTO_SANS_KR;
    this.ctx.textAlign = 'left';
    this.ctx.textBaseline = 'top';
    this.startX = 20 * this.dpr;
    this.lineHeight = (20*this.dpr) * 2.8;

    this.langTemplate = cardLangTemplate.c;
    this.colorTemplate = cardColorTemplate.default;

    this.name = '';
    this.position = '';
    this.company = '';
  }

  _fillBackground(color) {
    this.ctx.fillStyle = color;
    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
  }

  // https://codepen.io/bramus/pen/eZYqoO
  _wrapText(text, x, y, maxWidth, lineHeight) {
    let words = text.split(' ');
    let line = '';

    for(let n = 0; n < words.length; n++) {
      var testLine = line + words[n] + ' ';
      var metrics = this.ctx.measureText(testLine);
      var testWidth = metrics.width;
      if (testWidth > maxWidth && n > 0) {
        this.ctx.fillText(line, x, y);
        line = words[n] + ' ';
        y += lineHeight;
        console.log('y: '+ y);
      }
      else {
        line = testLine;
      }
    }
    this.ctx.fillText(line, x, y);
    return y;
  }

  _printName() {
    let x = this.startX;
    let y = 80;


    // 변수 타입
    if (this.langTemplate.varType.length > 0) {
      let varType = this.langTemplate.varType + ' ';
      this.ctx.fillStyle = this.colorTemplate.varType;
      this.ctx.fillText(varType, x, y);
      x += this.ctx.measureText(varType).width;
    }

    let varName = 'name = ';
    // 포인터 처리
    if (this.langTemplate.pointer)
      varName = '*' + varName;
    
    this.ctx.fillStyle = this.colorTemplate.varName;
    this.ctx.fillText(varName, x, y);

    let nameString = this.name;
    
    if (this.langTemplate === cardLangTemplate.python && nameString.byteLength() >= 20) {
      nameString = '"""' + nameString + '"""';
    }else {
      nameString = '"' + nameString + '"';
    }

    if (this.langTemplate.atsign) {
      nameString = '@' + nameString;
    }
      
    y += this.lineHeight;
    this.ctx.fillStyle = this.colorTemplate.str;

    y = this._wrapText(nameString, this.startX, y, this.canvas.width - this.startX * 2, this.lineHeight);

    return y;
  }

  _printPosition(y) {
    let positionString = this.position;

    positionString = this.langTemplate.commentStart + ' ' + positionString + ' ' + this.langTemplate.commentEnd;

    this.ctx.fillStyle = this.colorTemplate.comment;
    this._wrapText(positionString, this.startX, y, this.canvas.width - this.startX * 2, this.lineHeight)
    return y;
  }

  _printCompany() {
    this.ctx.fillStyle = this.colorTemplate.txt;
    let x = this.startX;
    let y = this.canvas.height - 60 * this.dpr;
    this.ctx.fillText(this.company, x, y);
    console.log(this.company);
  }

  updatePreview() {
    this._fillBackground(this.colorTemplate.bg);
    let y = this._printName();
    y += this.lineHeight;
    this._printPosition(y);
    this._printCompany();
  }
};

const canvas = document.getElementById("cardPreview");
let preview = new NameTagPreview(canvas);

$(document).ready(function() {
  var isMobile = function() {
    try{ document.createEvent("TouchEvent"); return true; }
    catch(e){ return false; }
  }

  // 입력 폼에 값이 변하면 프리뷰에 적용되도록 설정
  // 이름
  $('#InputName').on("change paste keyup", function() {
    preview.name = $(this).val();
    preview.updatePreview();
  });

  // 직급
  $('#InputPosition').on("change paste keyup", function() {
    preview.position = $(this).val();
    preview.updatePreview();
  });

  // 회사
  $('#InputCompany').on("change paste keyup", function() {
    preview.company = $(this).val();
    preview.updatePreview();
  });

  /* 언어 선택 변경 처리 함수 */
  var changeLanguage = function(lang) {  };

  // 언어 선택 선택지에 적용
  $('#selLanguage').change(function() {
    var lang = $(this).val();
    preview.langTemplate = cardLangTemplate[lang];
    preview.updatePreview();
  });

  // 테마 선택 변경에 따라 컬러 피커 세팅
  const updateSpectrum = function(tempColor) {
    $('input[data-lnk="bg"]').spectrum("set", tempColor.bg);
    $('input[data-lnk="varType"]').spectrum("set", tempColor.varType);
    $('input[data-lnk="varName"]').spectrum("set", tempColor.varName);
    $('input[data-lnk="str"]').spectrum("set", tempColor.str);
    $('input[data-lnk="comment"]').spectrum("set", tempColor.comment);
    $('input[data-lnk="txt"]').spectrum("set", tempColor.txt);
  };
  // 컬러피커 선택 움지임에 맞춰 미리보기에 적용한다.
  var changeChoiceColor = function(color, lnk) {
    if (lnk == 'bg') {
      // $('.nameTag').css('background-color', color);
    }else if(lnk == 'varType') {
      $('#cardPreview .varType').css('color', color);
    }else if(lnk == 'varName') {
      $('#cardPreview .varName').css('color', color);
    }else if(lnk == 'str') {
      $('#cardPreview .name').css('color', color);
      $('#cardPreview .atsign').css('color', color);
    }else if(lnk == 'comment') {
      $('#cardPreview .comment').css('color', color);
    }else if(lnk == 'txt') {
      $('#cardPreview').css('color', color);
      $('#cardPreview .symbol').css('color', color);
    }
  }

  // 테마 변경 선택지에 적용
  $('#selTheme').change(function() {
    let newTemplate = $(this).val();
    preview.colorTemplate = cardColorTemplate[newTemplate];
    preview.updatePreview();

    updateSpectrum(cardColorTemplate[newTemplate])
  });



  // 이미지 팝업 생성
  $('#generation').click(function() {
    // Trying new way
    ga('send', 'event', 'generation', 'click', 'gen');
    
    $('#resultImage').html('');
    // $('#resultImage').append(canvas);
    $('#resultArea').fadeIn('fast');
    $('#generation').fadeOut('fast');
    $('#bottomInformation').fadeOut('fast');
    // var imageData = Canvas2Image.saveAsPNG(canvas);
    // $('#downloadBtn').attr('href', imageData);
    $('html,body').scrollTop(0);

    /*
  // Trying new way
  	  ga('send', 'event', 'generation', 'click', 'gen');
      var w = 2200;
      var h = 2200;
      var gencanvas = document.createElement('canvas');
      gencanvas.width = w * 2;
      gencanvas.height = h * 2;
      gencanvas.style.width = w + 'px';
      gencanvas.style.height = h + 'px';
      var context = gencanvas.getContext('2d');
      context.scale(2, 2);
      html2canvas(document.getElementById("nameTag"), {
        canvas: gencanvas,
        onrendered: function(canvas) {
          var offset = $("div.nameTag").offset();
          var context = canvas.getContext('2d');
          var imageData = context.getImageData(offset.left*2, offset.top*2, context.canvas.width, context.canvas.height);
          context.clearRect(0, 0, context.canvas.width, context.canvas.height);
          canvas.width = 306*2;
          canvas.height= 510*2;
          canvas.style.width = 306 + 'px';
          canvas.style.height = 510 + 'px';
          context.putImageData(imageData, 0, 0);
          // document.body.appendChild(canvas);
          // $('#resultImage').html('<img src="'+imageData+'" class="center-block">');
          $('#resultImage').html('');
          $('#resultImage').append(canvas);
          $('#resultArea').fadeIn('fast');
          $('input.generation').fadeOut('fast');
          $('#bottomInformation').fadeOut('fast');
          var imageData = Canvas2Image.saveAsPNG(canvas);
          $('#downloadBtn').attr('href', imageData);
		  $('html,body').scrollTop(0);
        } // ,
//        width: 306,
//        height: 510
      });
      */
  });

  // 컬러피커 초기화
  $(".colorPick input").spectrum({
      preferredFormat: "hex",
      allowEmpty:true,
      showInitial: true,
      color: "#f00",
      showInput: true,
      change: function(color) {
          var c = color.toHexString(); // #ff0000
//          console.log('C : ' + c + ', lnk = ' + $(this).attr('data-lnk'));
          changeChoiceColor(c, $(this).attr('data-lnk'));
      },
      move: function(color) {
          var c = color.toHexString(); // #ff0000
//          console.log('C : ' + c + ', lnk = ' + $(this).attr('data-lnk'));
          changeChoiceColor(c, $(this).attr('data-lnk'));
      }
  });

  // 모바일에서 보여지는 결과하면 토글 처리
  $('#resultArea').click(function(){
    $('input.generation').fadeIn('fast');
    $(this).fadeOut('fast');
    $('#bottomInformation').fadeIn('fast');
  });
  $('#resultArea #downloadBtn').click(function(e) {
    e.stopPropagation();
  });
  // GET 파라미터
  // n : 이름
  // t : 테마
  // l : 언어
  // c : 회사
  // p : 직책

  // 트위터 공유하기 버튼 클릭 이벤트
  // 트위터 메시지를 보낼 수 있도록 기본 메시지를 입력하고 팝업창을 띄운다.
  $('input.share').click(function() {
    // 각 설정 값을 가져온다.
    var n = $('#InputName').val();
    var t = $('#selTheme').val();
    var l = $('#selLanguage').val();
    var c = $('#InputCompany').val();
    var p = $('#InputPosition').val();

    var cpBg      = $('input[data-lnk="bg"]').spectrum('get').toHexString();
    var cpVarType = $('input[data-lnk="varType"]').spectrum('get').toHexString();
    var cpVarName = $('input[data-lnk="varName"]').spectrum('get').toHexString();
    var cpStr     = $('input[data-lnk="str"]').spectrum('get').toHexString();
    var cpCommect = $('input[data-lnk="comment"]').spectrum('get').toHexString();
    var cpTxt     = $('input[data-lnk="txt"]').spectrum('get').toHexString();


    // 사이트 링크
    var url = "https://codenametag.github.io/";
    // 파라미터 생성
    var param = "?n="+encodeURIComponent(n)
                +"&t="+encodeURIComponent(t)
                +"&l="+encodeURIComponent(l)
                +"&c="+encodeURIComponent(c)
                +"&p="+encodeURIComponent(p)
                +"&cpBg="+encodeURIComponent(cpBg)
                +"&cpVarType="+encodeURIComponent(cpVarType)
                +"&cpVarName="+encodeURIComponent(cpVarName)
                +"&cpStr="+encodeURIComponent(cpStr)
                +"&cpCommect="+encodeURIComponent(cpCommect)
                +"&cpTxt="+encodeURIComponent(cpTxt);


    var fullUrl = url + param;
    // 트위터 메시지를 GET 파라미터 형태로 넘겨주므로 인코딩
    var twtMessage = encodeURIComponent("코드 스타일 명함을 만들어봤어요! " + fullUrl);
    // 트윗 날리기 주소의 GET 파라미터로 묶어주고,
    var popupUrl = "https://twitter.com/intent/tweet?text=" + twtMessage;
    // 팝업을 띄운다.
    var shareView = window.open(popupUrl, 'Twitter');
  });

  if (typeof getUrlParameter('n') != 'undefined') {
    // getp 함수 : 파라미터를 받아오고, 파라미터가 존재하지 않으면 공백, 존재하면 그것의 값을 반환
    // return은 문자형
    var getp = function(n) {
      var p = getUrlParameter(n);
      if (typeof p == 'undefined')
        return '';
      else
        return p;
    };
    // 각 파라미터의 값을 가져온다.
    var n = getp('n');
    var t = getp('t');
    var l = getp('l');
    var c = getp('c');
    var p = getp('p');

    var pickColor = {
      "bg"      : getp('cpBg'),
      "varType" : getp('cpVarType'),
      "varName" : getp('cpVarName'),
      "str"     : getp('cpStr'),
      "comment" : getp('cpCommect'),
      "txt"     : getp('cpTxt')
    };


    // 선택지나 값을 설정해주고 및 수정 이벤트 발생(프리뷰 적용이 이벤트를 캐치하여 동작하므로.)
    $('#selLanguage').val(l).change();
    $('#InputName').val(n).change();
    $('#selTheme').val(t).change();
    $('#InputCompany').val(c).change();
    $('#InputPosition').val(p).change();

    // 컬러피커를 세팅하고 미리보기 색상을 바꾼다.
    for(var index in pickColor) {
      $('input[data-lnk="'+index+'"]').spectrum('set', pickColor[index]);
      changeChoiceColor(pickColor[index], index);
    }

  }else {
    // GET 파라미터가 존재하지 않으면 기본 세팅으로 진행한다.
    console.log('GET 파라미터가 없으므로 기본 세팅으로 이루어집니다.');
    $('#selTheme').change();
  }


  var showInfo = false;

  // 백그라운드 인포&배경 off
  $('#startInfo').click(function(){
      $(this).fadeOut('fast');
      $('#bottomInformation').fadeIn('fast');
    if(showInfo){
      $('#informationBox').hide();
      showInfo = false;
    }
  });
  $('.bubble').click(function(){
        $('#startInfo').click();
  });

  // information 말풍선 토글
  $('#infoToggle').click(function(e) {
    $('#startInfo').fadeIn('fast');
    // $('#bottomInformation').fadeOut('fast');
  	e.stopPropagation();
    if(showInfo) {
      $('#informationBox').hide();
      showInfo = false;
    }else {
      $('#informationBox').show();
      showInfo = true;
    }
  });
  $('#infoToggle').click();

});
// NAMETAG 설명 언어 설정 토글

var changeLanguagePack = function(isKor) {
  var languagePack = {
    "kor": {
      'inputAreaTitle'  : "명찰내용",
      'previewTitle'    : "미리보기" ,
      'InputName'       : "이름",
      'InputCompany'       : "회사명",
      'InputPosition'   : "직위",
      'generation'      : "만들기",
      'share'           : "공유",
      'downloadBtn'     : "저장"
    },
    "eng": {
      'inputAreaTitle': "NameTag Info",
      'previewTitle'    : "Preview",
      'InputName'       : "Name",
      'InputCompany'       : "Crop",
      'InputPosition'   : "Position",
      'generation'      : "Generation",
      'share'           : "Share",
      'downloadBtn'     : "Download"
    }
  }
  var infoBubble = {
  	"kor": '<dl>\
              <dt style="font-size: 20px;">\
                프로그래밍 언어 스타일의 명찰을 만들어보세요!</dt></br>\
              <dt>명찰내용</dt>\
                <dd>이름, 회사 등 명찰에 적용할 정보를 입력합니다.</dd>\
              </br><dt>미리보기</dt>\
                <dd>입력 값이 적용된 명찰을 미리 확인할 수 있습니다.</dd>\
              </br><dt>만들기</dt>\
                <dd> 명찰을 PNG 파일로 생성합니다.</dd>\
              </br><dt>공유</dt>\
                <dd> 생성한 명찰을 SNS로 공유할 수 있습니다.</dd>\
            </dl>',
  	"eng": '<dl>\
              <dt style="font-size: 20px;">\
                Make your custom name tag with code!</dt></br>\
              <dt>NameTag Info</dt>\
                <dd> Type your name and company to name tag.</dd>\
              </br><dt>Preview</dt>\
                <dd> You can see the name tag\'s input value has been applied.</dd>\
              </br><dt>Generation</dt>\
                <dd> Generate your name tag with PNG file.</dd>\
              </br><dt>Share</dt>\
                <dd> You can share your name tag on Twitter.</dd>\
            </dl>'
  };

  var pack;
  var $iBubble = $('#informationBox .bubble');
  if (isKor) {
    pack = languagePack.kor;
    $iBubble.html(infoBubble.kor);
  }else {
    pack = languagePack.eng;
    $iBubble.html(infoBubble.eng);
  }
  for(var index in pack) {
    if (index.substring(0,5) == 'Input') {
      $('#'+index).attr('placeholder', pack[index]);
    }else if (index == 'share') {
      // console.log('asdf');
      $('input.'+index).val(pack[index]);
    }else {
      $('#'+index).text(pack[index]);
    }
  }
}
$("#toggleLang").bootstrapSwitch();
$('#toggleLang').on('switchChange.bootstrapSwitch', function(event, state) {
  changeLanguagePack(state);
});
changeLanguagePack(true); // 기본 한국어셋으로.
 // 구글 유니버셜 애널러틱스 코드
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80202920-1', 'auto');
  ga('send', 'pageview');


</script>
    </body>

</html>
